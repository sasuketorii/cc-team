# CCTeamçµ±åˆæ”¹å–„ä¿®æ­£ã‚¹ãƒ†ãƒƒãƒ—èª¿æŸ»å ±å‘Šæ›¸

ä½œæˆæ—¥æ™‚: 2025å¹´01æœˆ09æ—¥ 21æ™‚05åˆ†17ç§’ (JST)
ä½œæˆè€…: CCTeam
ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 0.0.7

---

## ğŸ“‹ æ¦‚è¦

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã«åŸºã¥ãã€CCTeamã‚·ã‚¹ãƒ†ãƒ ã®åŒ…æ‹¬çš„ãªæ”¹å–„è¨ˆç”»ã‚’ç­–å®šã—ã¾ã—ãŸã€‚ä¸»ãªæ”¹å–„ç‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š

1. tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³ã®çµ±åˆï¼ˆBossã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ä¸€å…ƒåŒ–ï¼‰
2. Git worktreeä¸¦åˆ—é–‹ç™ºã®ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ä½œæˆã¨è‡ªå‹•åŒ–è¨ˆç”»
3. Dockerèªè¨¼å¾Œã®çµ„ç¹”çš„é–‹ç™ºã®ç¢ºä¿
4. tmuxãƒšã‚¤ãƒ³ç®¡ç†æ©Ÿèƒ½ã®å®Ÿè£…ï¼ˆexitå¯¾ç­–ã€å‹•çš„è¿½åŠ ï¼‰

## ğŸ” ç¾çŠ¶åˆ†æã¨æ”¹å–„è¦ä»¶

### 1. tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³çµ±åˆã®å¿…è¦æ€§

#### ç¾çŠ¶ã®å•é¡Œç‚¹
```
ç¾åœ¨ã®å®Ÿè£…:
- ccteam-boss ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆBoss | Geminiï¼‰
- ccteam ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆBoss | Worker1 | Worker2 | Worker3ï¼‰
â†’ 2ã¤ã®ç‹¬ç«‹ã—ãŸBossãŒå­˜åœ¨ã—ã€æŒ‡ç¤ºãŒåˆ†æ•£
```

#### å‚è€ƒå®Ÿè£…ï¼ˆClaude-Code-Communicationï¼‰
```
president ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆpresidentï¼‰
multiagent ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆboss1 | worker1 | worker2 | worker3ï¼‰
â†’ boss1ãŒå”¯ä¸€ã®ãƒªãƒ¼ãƒ€ãƒ¼ã¨ã—ã¦æ©Ÿèƒ½
```

### 2. Git worktreeä¸¦åˆ—é–‹ç™ºã®æ‰‹å‹•ãƒ—ãƒ­ã‚»ã‚¹

ç¾åœ¨ã¯å®Œå…¨ã«æ‰‹å‹•ã§ã®æ“ä½œãŒå¿…è¦ï¼š
- worktreeä½œæˆ
- å„worktreeã§ã®CCTeamèµ·å‹•
- ã‚¿ã‚¹ã‚¯ã®æŒ¯ã‚Šåˆ†ã‘

### 3. tmuxãƒšã‚¤ãƒ³ç®¡ç†ã®è„†å¼±æ€§

- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒexitã™ã‚‹ã¨ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒå´©å£Š
- å†èµ·å‹•æ™‚ã«å…ƒã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒå¾©å…ƒã•ã‚Œãªã„
- å‹•çš„ãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¿½åŠ ãŒã§ããªã„

## ğŸ’¡ åŒ…æ‹¬çš„æ”¹å–„è¨ˆç”»

### æ”¹å–„ç‚¹1: tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³çµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

#### æ–°ã—ã„ã‚»ãƒƒã‚·ãƒ§ãƒ³æ§‹æˆ
```bash
# çµ±åˆã•ã‚ŒãŸBossã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
ccteam ã‚»ãƒƒã‚·ãƒ§ãƒ³:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Boss     â”‚   Worker1   â”‚
â”‚  (çµ±åˆç‰ˆ)   â”‚             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Worker2   â”‚   Worker3   â”‚
â”‚             â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ccteam-support ã‚»ãƒƒã‚·ãƒ§ãƒ³:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Gemini            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å®Ÿè£…æ–¹æ³•
```bash
#!/bin/bash
# scripts/setup-unified.sh

# æ—¢å­˜ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
tmux kill-session -t ccteam 2>/dev/null
tmux kill-session -t ccteam-boss 2>/dev/null
tmux kill-session -t ccteam-support 2>/dev/null

# çµ±åˆãƒ¡ã‚¤ãƒ³ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ
tmux new-session -d -s ccteam -n main

# 2x2ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆä½œæˆ
tmux split-window -h -t ccteam:main
tmux split-window -v -t ccteam:main.0
tmux split-window -v -t ccteam:main.1

# ãƒšã‚¤ãƒ³ã«åå‰ã‚’è¨­å®šï¼ˆtmux 3.0+ï¼‰
tmux select-pane -t ccteam:main.0 -T "Boss"
tmux select-pane -t ccteam:main.1 -T "Worker1"
tmux select-pane -t ccteam:main.2 -T "Worker2"
tmux select-pane -t ccteam:main.3 -T "Worker3"

# ã‚µãƒãƒ¼ãƒˆã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆGeminiç”¨ï¼‰
tmux new-session -d -s ccteam-support -n gemini
tmux select-pane -t ccteam-support:gemini.0 -T "Gemini"

echo "âœ… çµ±åˆã‚»ãƒƒã‚·ãƒ§ãƒ³æ§‹æˆå®Œäº†"
```

### æ”¹å–„ç‚¹2: Git worktreeä¸¦åˆ—é–‹ç™ºãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã¨è‡ªå‹•åŒ–

#### æ‰‹å‹•ä¸¦åˆ—é–‹ç™ºãƒãƒ‹ãƒ¥ã‚¢ãƒ«
```bash
#!/bin/bash
# scripts/worktree-parallel-manual.sh

echo "=== CCTeam Git Worktree ä¸¦åˆ—é–‹ç™ºãƒãƒ‹ãƒ¥ã‚¢ãƒ« ==="
echo ""
echo "ğŸ“‹ å‰ææ¡ä»¶:"
echo "- è¤‡æ•°ã®ç‹¬ç«‹ã—ãŸã‚¿ã‚¹ã‚¯ãŒå­˜åœ¨ã™ã‚‹"
echo "- ã‚¿ã‚¹ã‚¯é–“ã§ã‚³ãƒ¼ãƒ‰ç«¶åˆã®å¯èƒ½æ€§ãŒã‚ã‚‹"
echo ""
echo "ğŸ”§ æ‰‹é †:"
echo ""
echo "1. ã‚¿ã‚¹ã‚¯ã®åˆ†æã¨åˆ†å²åˆ¤æ–­"
echo "   - ã‚¿ã‚¹ã‚¯A: ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼æ©Ÿèƒ½"
echo "   - ã‚¿ã‚¹ã‚¯B: æ±ºæ¸ˆã‚·ã‚¹ãƒ†ãƒ çµ±åˆ"
echo "   â†’ ä¸¡ã‚¿ã‚¹ã‚¯ã¯ç‹¬ç«‹ã—ã¦ã„ã‚‹ãŸã‚ä¸¦åˆ—å¯èƒ½"
echo ""
echo "2. Worktreeã®ä½œæˆ"
cat << 'EOF'
# ãƒ¡ã‚¤ãƒ³ã§å®Ÿè¡Œ
git worktree add ../worktrees/feature-auth feature/auth
git worktree add ../worktrees/feature-payment feature/payment
EOF
echo ""
echo "3. å„Worktreeã§ãƒãƒ¼ãƒ èµ·å‹•"
cat << 'EOF'
# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«1
cd ../worktrees/feature-auth
./scripts/launch-ccteam.sh
# BOSSã«æŒ‡ç¤º: "ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„"

# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«2
cd ../worktrees/feature-payment
./scripts/launch-ccteam.sh
# BOSSã«æŒ‡ç¤º: "æ±ºæ¸ˆã‚·ã‚¹ãƒ†ãƒ çµ±åˆã‚’å®Ÿè£…ã—ã¦ãã ã•ã„"
EOF
echo ""
echo "4. é€²æ—ç®¡ç†"
echo "   - å„worktreeã®BOSSãŒç‹¬ç«‹ã—ã¦ä½œæ¥­ã‚’ç®¡ç†"
echo "   - å®šæœŸçš„ã«ãƒ¡ã‚¤ãƒ³ãƒ–ãƒ©ãƒ³ãƒã«ãƒãƒ¼ã‚¸"
echo ""
echo "5. çµ±åˆ"
cat << 'EOF'
# å„worktreeã§ä½œæ¥­å®Œäº†å¾Œ
cd ../worktrees/feature-auth
git push origin feature/auth

cd ../../CCTeam
git worktree remove ../worktrees/feature-auth
EOF
```

#### è‡ªå‹•ä¸¦åˆ—åˆ¤æ–­ã‚·ã‚¹ãƒ†ãƒ ï¼ˆå°†æ¥å®Ÿè£…ï¼‰
```python
#!/usr/bin/env python3
# scripts/auto_parallel_analyzer.py

import json
from pathlib import Path
from typing import List, Dict, Tuple

class ParallelAnalyzer:
    """ã‚¿ã‚¹ã‚¯ã®ä¸¦åˆ—å¯èƒ½æ€§ã‚’åˆ†æ"""
    
    def analyze_tasks(self, tasks: List[Dict]) -> List[Tuple[str, List[str]]]:
        """
        ã‚¿ã‚¹ã‚¯ã‚’åˆ†æã—ã¦ä¸¦åˆ—å®Ÿè¡Œå¯èƒ½ãªã‚°ãƒ«ãƒ¼ãƒ—ã«åˆ†é¡
        
        Returns:
            List of (branch_name, task_ids)
        """
        parallel_groups = []
        
        # ä¾å­˜é–¢ä¿‚ã¨ãƒ•ã‚¡ã‚¤ãƒ«ç«¶åˆã‚’åˆ†æ
        for i, task in enumerate(tasks):
            # å½±éŸ¿ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–å¾—
            affected_files = self._get_affected_files(task)
            
            # æ—¢å­˜ã‚°ãƒ«ãƒ¼ãƒ—ã¨ã®ç«¶åˆãƒã‚§ãƒƒã‚¯
            can_parallel = True
            for group_name, group_tasks in parallel_groups:
                if self._has_conflict(task, group_tasks, affected_files):
                    can_parallel = False
                    break
            
            if can_parallel:
                # æ–°ã—ã„ä¸¦åˆ—ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆ
                branch_name = f"parallel-{task['id']}"
                parallel_groups.append((branch_name, [task['id']]))
        
        return parallel_groups
    
    def _get_affected_files(self, task: Dict) -> List[str]:
        """ã‚¿ã‚¹ã‚¯ãŒå½±éŸ¿ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¨å®š"""
        # ã‚¿ã‚¹ã‚¯èª¬æ˜ã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’æŠ½å‡º
        # å®Ÿè£…ä¾‹: NLPã‚„æ­£è¦è¡¨ç¾ã§è§£æ
        return []
    
    def _has_conflict(self, task: Dict, group_tasks: List[str], 
                      affected_files: List[str]) -> bool:
        """ãƒ•ã‚¡ã‚¤ãƒ«ç«¶åˆã®æœ‰ç„¡ã‚’ãƒã‚§ãƒƒã‚¯"""
        # å®Ÿè£…ä¾‹: Gitå±¥æ­´ã‚„ã‚³ãƒ¼ãƒ‰ä¾å­˜é–¢ä¿‚ã‚’åˆ†æ
        return False

# è‡ªå‹•å®Ÿè¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆ
def auto_create_worktrees(task_file: str):
    """ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰è‡ªå‹•çš„ã«worktreeã‚’ä½œæˆ"""
    analyzer = ParallelAnalyzer()
    
    with open(task_file, 'r') as f:
        tasks = json.load(f)
    
    parallel_groups = analyzer.analyze_tasks(tasks)
    
    for branch_name, task_ids in parallel_groups:
        print(f"Creating worktree: {branch_name} for tasks: {task_ids}")
        # git worktree add ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
        # CCTeamã‚’èµ·å‹•
        # ã‚¿ã‚¹ã‚¯ã‚’è‡ªå‹•çš„ã«BOSSã«é€ä¿¡
```

### æ”¹å–„ç‚¹3: Dockerèªè¨¼å¾Œã®çµ„ç¹”çš„é–‹ç™ºã®ä¿è¨¼

#### Dockerèªè¨¼å¾Œã®å‹•ä½œç¢ºèª
```yaml
# docker-compose-ccteam.yml
version: '3.8'

services:
  boss:
    image: claude-agent:latest
    container_name: ccteam-boss
    volumes:
      - ./claude_config/boss:/root/.claude
      - ./:/workspace
    working_dir: /workspace
    networks:
      - claude-net
    command: |
      bash -c "
        echo 'Boss ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•å®Œäº†';
        echo 'èªè¨¼çŠ¶æ…‹: $(claude --version && echo 'âœ… èªè¨¼æ¸ˆã¿' || echo 'âŒ æœªèªè¨¼')';
        # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€šä¿¡ãƒ†ã‚¹ãƒˆ
        while true; do
          sleep 60
          echo 'WorkerçŠ¶æ…‹ç¢ºèªä¸­...'
          # å®Ÿéš›ã®é€šä¿¡ãƒ­ã‚¸ãƒƒã‚¯ã‚’ã“ã“ã«å®Ÿè£…
        done
      "

  worker1:
    image: claude-agent:latest
    container_name: ccteam-worker1
    volumes:
      - ./claude_config/worker1:/root/.claude
      - ./:/workspace
    working_dir: /workspace
    networks:
      - claude-net
    depends_on:
      - boss
    command: |
      bash -c "
        echo 'Worker1 ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•å®Œäº†';
        echo 'èªè¨¼çŠ¶æ…‹: $(claude --version && echo 'âœ… èªè¨¼æ¸ˆã¿' || echo 'âŒ æœªèªè¨¼')';
        # Bossã‹ã‚‰ã®æŒ‡ç¤ºå¾…æ©Ÿ
        tail -f /dev/null
      "

  # worker2, worker3ã‚‚åŒæ§˜

  # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€šä¿¡ãƒ–ãƒªãƒƒã‚¸
  communication-bridge:
    image: alpine:latest
    container_name: ccteam-bridge
    volumes:
      - ./communication:/var/communication
    networks:
      - claude-net
    command: |
      sh -c "
        # é€šä¿¡ç”¨ã®åå‰ä»˜ããƒ‘ã‚¤ãƒ—ã‚’ä½œæˆ
        mkfifo /var/communication/boss-to-worker1
        mkfifo /var/communication/worker1-to-boss
        # ä»–ã®ãƒšã‚¢ã‚‚ä½œæˆ
        tail -f /dev/null
      "

networks:
  claude-net:
    driver: bridge
```

**å›ç­”ï¼šã¯ã„ã€çµ„ç¹”çš„é–‹ç™ºã¯å¯èƒ½ã§ã™ã€‚**
- å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯èªè¨¼æ¸ˆã¿çŠ¶æ…‹ã§èµ·å‹•
- å…±æœ‰ãƒœãƒªãƒ¥ãƒ¼ãƒ ã§ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹
- ã‚«ã‚¹ã‚¿ãƒ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§ç›¸äº’é€šä¿¡å¯èƒ½

### æ”¹å–„ç‚¹4: tmuxãƒšã‚¤ãƒ³ç®¡ç†æ©Ÿèƒ½

#### å‹•çš„ãƒšã‚¤ãƒ³å¾©å…ƒãƒ»è¿½åŠ ã‚·ã‚¹ãƒ†ãƒ 
```bash
#!/bin/bash
# scripts/tmux-pane-manager.sh

# ãƒšã‚¤ãƒ³çŠ¶æ…‹ã‚’ä¿å­˜
save_pane_layout() {
    local session=$1
    tmux list-panes -t $session -F "#{pane_index}:#{pane_title}:#{pane_width}x#{pane_height}" > ~/.ccteam/pane_layout_$session.txt
}

# ãƒšã‚¤ãƒ³ã‚’å¾©å…ƒ
restore_pane_layout() {
    local session=$1
    local layout_file=~/.ccteam/pane_layout_$session.txt
    
    if [[ ! -f $layout_file ]]; then
        echo "ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"
        return 1
    fi
    
    # ç¾åœ¨ã®ãƒšã‚¤ãƒ³æ•°ã‚’ç¢ºèª
    current_panes=$(tmux list-panes -t $session | wc -l)
    expected_panes=$(wc -l < $layout_file)
    
    if [[ $current_panes -lt $expected_panes ]]; then
        echo "ãƒšã‚¤ãƒ³ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚å¾©å…ƒã‚’é–‹å§‹..."
        
        # ä¸è¶³åˆ†ã®ãƒšã‚¤ãƒ³ã‚’ä½œæˆ
        while [[ $current_panes -lt $expected_panes ]]; do
            if [[ $current_panes -eq 1 ]]; then
                tmux split-window -h -t $session
            elif [[ $current_panes -eq 2 ]]; then
                tmux split-window -v -t $session.0
            elif [[ $current_panes -eq 3 ]]; then
                tmux split-window -v -t $session.1
            fi
            ((current_panes++))
        done
        
        # å‡ç­‰ãªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«å†é…ç½®
        tmux select-layout -t $session tiled
    fi
}

# å˜ä¸€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’è¿½åŠ 
add_single_agent() {
    local session=$1
    local agent_type=$2  # worker4, specialist1, etc.
    
    # ç¾åœ¨ã®ãƒšã‚¤ãƒ³æ•°ã‚’ç¢ºèª
    current_panes=$(tmux list-panes -t $session | wc -l)
    
    # æ–°ã—ã„ãƒšã‚¤ãƒ³ã‚’ä½œæˆ
    if [[ $current_panes -eq 4 ]]; then
        # 2x2ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®å ´åˆã€3x2ã«æ‹¡å¼µ
        tmux split-window -h -t $session.3
        tmux select-layout -t $session tiled
    else
        # ãã‚Œä»¥å¤–ã¯æœ€å¾Œã«è¿½åŠ 
        tmux split-window -t $session
        tmux select-layout -t $session tiled
    fi
    
    # æ–°ã—ã„ãƒšã‚¤ãƒ³ã«ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’è¨­å®š
    new_pane_index=$((current_panes))
    tmux select-pane -t $session.$new_pane_index -T "$agent_type"
    
    echo "âœ… $agent_type ã‚’è¿½åŠ ã—ã¾ã—ãŸï¼ˆãƒšã‚¤ãƒ³: $new_pane_indexï¼‰"
}

# exitãƒ•ãƒƒã‚¯ï¼ˆè‡ªå‹•å¾©å…ƒï¼‰
setup_exit_hook() {
    cat > ~/.ccteam/pane_exit_hook.sh << 'EOF'
#!/bin/bash
# tmuxãƒšã‚¤ãƒ³ãŒçµ‚äº†ã—ãŸæ™‚ã«è‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹ãƒ•ãƒƒã‚¯

SESSION=$(tmux display-message -p '#S')
if [[ $SESSION == "ccteam"* ]]; then
    # ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’å¾©å…ƒ
    /path/to/scripts/tmux-pane-manager.sh restore $SESSION
    
    # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å†èµ·å‹•
    PANE_TITLE=$(tmux display-message -p '#{pane_title}')
    case $PANE_TITLE in
        "Boss")
            tmux send-keys "claude" C-m
            ;;
        "Worker"*)
            tmux send-keys "claude" C-m
            ;;
    esac
fi
EOF
    
    # tmuxã®è¨­å®šã«è¿½åŠ 
    echo "set-hook -g pane-died 'run-shell ~/.ccteam/pane_exit_hook.sh'" >> ~/.tmux.conf
}

# ãƒ¡ã‚¤ãƒ³å‡¦ç†
case "$1" in
    "save")
        save_pane_layout "$2"
        ;;
    "restore")
        restore_pane_layout "$2"
        ;;
    "add")
        add_single_agent "$2" "$3"
        ;;
    "setup-hooks")
        setup_exit_hook
        ;;
    *)
        echo "Usage: $0 {save|restore|add|setup-hooks} [session] [agent_type]"
        ;;
esac
```

## ğŸ“ˆ å®Ÿè£…è¨ˆç”»

| ãƒ•ã‚§ãƒ¼ã‚º | å†…å®¹ | æœŸé–“ | å„ªå…ˆåº¦ |
|---------|------|------|--------|
| Phase 1 | tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³çµ±åˆï¼ˆBossä¸€å…ƒåŒ–ï¼‰ | 2æ—¥ | é«˜ |
| Phase 2 | tmuxãƒšã‚¤ãƒ³ç®¡ç†æ©Ÿèƒ½ | 3æ—¥ | é«˜ |
| Phase 3 | worktreeä¸¦åˆ—ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ä½œæˆ | 1æ—¥ | é«˜ |
| Phase 4 | Dockerèªè¨¼ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£… | 1é€±é–“ | ä¸­ |
| Phase 5 | worktreeè‡ªå‹•ä¸¦åˆ—åŒ– | 2é€±é–“ | ä½ |

## ğŸš€ å³æ™‚å®Ÿè¡Œå¯èƒ½ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³

### 1. tmuxã‚»ãƒƒã‚·ãƒ§ãƒ³çµ±åˆ
```bash
# æ–°ã—ã„setup-unified.shã‚’ä½œæˆã—ã¦å®Ÿè¡Œ
./scripts/setup-unified.sh
```

### 2. ãƒšã‚¤ãƒ³ç®¡ç†æ©Ÿèƒ½ã®æœ‰åŠ¹åŒ–
```bash
# ãƒ•ãƒƒã‚¯ã‚’è¨­å®š
./scripts/tmux-pane-manager.sh setup-hooks

# ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ä¿å­˜
./scripts/tmux-pane-manager.sh save ccteam

# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¿½åŠ ä¾‹
./scripts/tmux-pane-manager.sh add ccteam worker4
```

### 3. worktreeä¸¦åˆ—é–‹ç™ºã®é–‹å§‹
```bash
# ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã«å¾“ã£ã¦å®Ÿè¡Œ
./scripts/worktree-parallel-manual.sh

# å®Ÿéš›ã®ä¸¦åˆ—é–‹ç™º
git worktree add ../worktrees/feature-x feature/x
cd ../worktrees/feature-x
./scripts/launch-ccteam.sh
```

## ğŸ“Š æœŸå¾…ã•ã‚Œã‚‹æˆæœ

1. **çµ±ä¸€ã•ã‚ŒãŸBoss**: æŒ‡ç¤ºã®ä¸€å…ƒç®¡ç†ã«ã‚ˆã‚Šæ··ä¹±ã‚’é˜²æ­¢
2. **å …ç‰¢ãªãƒšã‚¤ãƒ³ç®¡ç†**: exitã—ã¦ã‚‚è‡ªå‹•å¾©å…ƒã€å‹•çš„è¿½åŠ å¯èƒ½
3. **åŠ¹ç‡çš„ãªä¸¦åˆ—é–‹ç™º**: æ˜ç¢ºãªãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã¨å°†æ¥ã®è‡ªå‹•åŒ–
4. **å®‰å®šã—ãŸèªè¨¼**: Dockerç’°å¢ƒã§ã®ç¢ºå®Ÿãªå‹•ä½œ

## ğŸ“ å‚è€ƒè³‡æ–™

- [Claude-Code-Communicationå®Ÿè£…](https://github.com/Akira-Papa/Claude-Code-Communication)
- [tmux hooks documentation](https://github.com/tmux/tmux/wiki/Hooks)
- [Git Worktree Best Practices](https://git-scm.com/docs/git-worktree)

---

## æ›´æ–°å±¥æ­´

- 2025å¹´01æœˆ09æ—¥ 21æ™‚05åˆ†17ç§’ (JST): åˆç‰ˆä½œæˆ