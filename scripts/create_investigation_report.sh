#!/bin/bash

# èª¿æŸ»å ±å‘Šæ›¸ä½œæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
# æ—¥æœ¬æ™‚é–“ã§ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ç”Ÿæˆ

set -euo pipefail

# å¼•æ•°ãƒã‚§ãƒƒã‚¯
if [ $# -lt 1 ]; then
    echo "Usage: $0 <title> [description]"
    echo "Example: $0 'ã‚¨ãƒ©ãƒ¼ãƒ«ãƒ¼ãƒ—èª¿æŸ»' 'ã‚¨ãƒ©ãƒ¼ãƒ«ãƒ¼ãƒ—æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ ã®å‹•ä½œèª¿æŸ»'"
    exit 1
fi

TITLE="$1"
DESCRIPTION="${2:-}"

# æ—¥æœ¬æ™‚é–“ã§ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ç”Ÿæˆï¼ˆUTC+9ï¼‰
TIMESTAMP=$(TZ=Asia/Tokyo date '+%Y%m%d_%H%M%S')
DATE_JP=$(TZ=Asia/Tokyo date '+%Yå¹´%mæœˆ%dæ—¥ %Hæ™‚%Måˆ†%Sç§’')

# ãƒ•ã‚¡ã‚¤ãƒ«åç”Ÿæˆï¼ˆã‚¹ãƒšãƒ¼ã‚¹ã‚’ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã«ç½®æ›ï¼‰
FILENAME="investigation_reports/${TIMESTAMP}_${TITLE// /_}èª¿æŸ»å ±å‘Š.md"

# å ±å‘Šæ›¸ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆ
cat > "$FILENAME" << EOF
# ${TITLE}èª¿æŸ»å ±å‘Šæ›¸

ä½œæˆæ—¥æ™‚: ${DATE_JP} (JST)
ä½œæˆè€…: CCTeam
ãƒãƒ¼ã‚¸ãƒ§ãƒ³: $(cat package.json | grep '"version"' | cut -d'"' -f4)

---

## ğŸ“‹ æ¦‚è¦

${DESCRIPTION}

## ğŸ” èª¿æŸ»ç›®çš„

- [ ] ç›®çš„1
- [ ] ç›®çš„2
- [ ] ç›®çš„3

## ğŸ“Š èª¿æŸ»çµæœ

### 1. ç¾çŠ¶åˆ†æ

### 2. å•é¡Œç‚¹ã®ç‰¹å®š

### 3. æŠ€è¡“çš„è©³ç´°

## ğŸ’¡ ææ¡ˆãƒ»æ”¹å–„ç­–

### çŸ­æœŸçš„å¯¾ç­–

### é•·æœŸçš„å¯¾ç­–

## ğŸ“ˆ å®Ÿè£…è¨ˆç”»

| ãƒ•ã‚§ãƒ¼ã‚º | å†…å®¹ | æœŸé–“ | å„ªå…ˆåº¦ |
|---------|------|------|--------|
| Phase 1 | | 1é€±é–“ | é«˜ |
| Phase 2 | | 2é€±é–“ | ä¸­ |
| Phase 3 | | 1ãƒ¶æœˆ | ä½ |

## ğŸš€ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

1. 
2. 
3. 

## ğŸ“ å‚è€ƒè³‡æ–™

- 
- 
- 

---

## æ›´æ–°å±¥æ­´

- ${DATE_JP}: åˆç‰ˆä½œæˆ
EOF

echo "âœ… èª¿æŸ»å ±å‘Šæ›¸ã‚’ä½œæˆã—ã¾ã—ãŸ: $FILENAME"
echo ""
echo "ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ãã ã•ã„:"
echo "  code $FILENAME"
echo "  ã¾ãŸã¯"
echo "  cursor $FILENAME"